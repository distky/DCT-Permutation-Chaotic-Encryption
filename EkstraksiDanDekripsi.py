# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'EkstraksiDanDekripsi.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from function.DctEncrypt import processExtractAndDecrypt


class Ui_EkstraksiDekripsi(object):
    def setupUi(self, EkstraksiDekripsi):
        EkstraksiDekripsi.setObjectName("EkstraksiDekripsi")
        EkstraksiDekripsi.resize(650, 500)
        self.citraSteganoPath = QtWidgets.QLineEdit(EkstraksiDekripsi)
        self.citraSteganoPath.setEnabled(False)
        self.citraSteganoPath.setGeometry(QtCore.QRect(100, 20, 271, 20))
        self.citraSteganoPath.setObjectName("citraSteganoPath")
        self.btnCitraStegano = QtWidgets.QPushButton(EkstraksiDekripsi)
        self.btnCitraStegano.setGeometry(QtCore.QRect(400, 20, 75, 20))
        self.btnCitraStegano.setObjectName("btnCitraStegano")
        self.btnCitraStegano.clicked.connect(lambda: self.openDialog(self.citraSteganoPath, True, dialogName='Citra Stegano'))
        self.lblInputKunciX0Y0 = QtWidgets.QLabel(EkstraksiDekripsi)
        self.lblInputKunciX0Y0.setGeometry(QtCore.QRect(20, 130, 121, 16))
        self.lblInputKunciX0Y0.setObjectName("lblInputKunciX0Y0")
        self.graphicsView = QtWidgets.QGraphicsView(EkstraksiDekripsi)
        self.graphicsView.setGeometry(QtCore.QRect(20, 270, 256, 192))
        self.graphicsView.setObjectName("graphicsView")
        self.doubleSpinBoxX0 = QtWidgets.QDoubleSpinBox(EkstraksiDekripsi)
        self.doubleSpinBoxX0.setGeometry(QtCore.QRect(100, 170, 81, 22))
        self.doubleSpinBoxX0.setDecimals(8)
        self.doubleSpinBoxX0.setMaximum(1.0)
        self.doubleSpinBoxX0.setSingleStep(1e-06)
        self.doubleSpinBoxX0.setObjectName("doubleSpinBoxX0")
        self.btnDcMatrix = QtWidgets.QPushButton(EkstraksiDekripsi)
        self.btnDcMatrix.setGeometry(QtCore.QRect(400, 70, 75, 20))
        self.btnDcMatrix.setObjectName("btnDcMatrix")
        self.btnDcMatrix.clicked.connect(lambda: self.openDialog(self.dcMatrixPath, False, dialogName='DC Matrix'))
        self.lblNilaiY0 = QtWidgets.QLabel(EkstraksiDekripsi)
        self.lblNilaiY0.setGeometry(QtCore.QRect(20, 200, 47, 21))
        self.lblNilaiY0.setObjectName("lblNilaiY0")
        self.lblNilaiX0 = QtWidgets.QLabel(EkstraksiDekripsi)
        self.lblNilaiX0.setGeometry(QtCore.QRect(20, 170, 47, 21))
        self.lblNilaiX0.setObjectName("lblNilaiX0")
        self.btnKembali = QtWidgets.QPushButton(EkstraksiDekripsi)
        self.btnKembali.setGeometry(QtCore.QRect(540, 440, 75, 21))
        self.btnKembali.setObjectName("btnKembali")
        self.lblCitraStegano = QtWidgets.QLabel(EkstraksiDekripsi)
        self.lblCitraStegano.setGeometry(QtCore.QRect(20, 20, 71, 20))
        self.lblCitraStegano.setObjectName("lblCitraStegano")
        self.dcMatrixPath = QtWidgets.QLineEdit(EkstraksiDekripsi)
        self.dcMatrixPath.setEnabled(False)
        self.dcMatrixPath.setGeometry(QtCore.QRect(100, 70, 271, 20))
        self.dcMatrixPath.setObjectName("dcMatrixPath")
        self.doubleSpinBoxY0 = QtWidgets.QDoubleSpinBox(EkstraksiDekripsi)
        self.doubleSpinBoxY0.setGeometry(QtCore.QRect(100, 200, 81, 22))
        self.doubleSpinBoxY0.setDecimals(8)
        self.doubleSpinBoxY0.setMaximum(1.0)
        self.doubleSpinBoxY0.setSingleStep(1e-06)
        self.doubleSpinBoxY0.setObjectName("doubleSpinBoxY0")
        self.lblDcMatrix = QtWidgets.QLabel(EkstraksiDekripsi)
        self.lblDcMatrix.setGeometry(QtCore.QRect(20, 70, 71, 20))
        self.lblDcMatrix.setObjectName("lblDcMatrix")
        self.btnEkstraksiDanDekripsi = QtWidgets.QPushButton(EkstraksiDekripsi)
        self.btnEkstraksiDanDekripsi.setGeometry(QtCore.QRect(20, 240, 141, 23))
        self.btnEkstraksiDanDekripsi.setObjectName("btnEkstraksiDanDekripsi")
        self.btnEkstraksiDanDekripsi.clicked.connect(self.extractAndDecrypt)

        self.retranslateUi(EkstraksiDekripsi)
        QtCore.QMetaObject.connectSlotsByName(EkstraksiDekripsi)

    def retranslateUi(self, EkstraksiDekripsi):
        _translate = QtCore.QCoreApplication.translate
        EkstraksiDekripsi.setWindowTitle(_translate("EkstraksiDekripsi", "Ekstraksi dan Dekripsi"))
        self.btnCitraStegano.setText(_translate("EkstraksiDekripsi", "Open File"))
        self.lblInputKunciX0Y0.setText(_translate("EkstraksiDekripsi", "Input Kunci X0 dan Y0"))
        self.btnDcMatrix.setText(_translate("EkstraksiDekripsi", "Open File"))
        self.lblNilaiY0.setText(_translate("EkstraksiDekripsi", "Nilai Y0"))
        self.lblNilaiX0.setText(_translate("EkstraksiDekripsi", "Nilai X0"))
        self.btnKembali.setText(_translate("EkstraksiDekripsi", "Kembali"))
        self.lblCitraStegano.setText(_translate("EkstraksiDekripsi", "Citra Stegano"))
        self.lblDcMatrix.setText(_translate("EkstraksiDekripsi", "DC Matrix"))
        self.btnEkstraksiDanDekripsi.setText(_translate("EkstraksiDekripsi", "Ekstraksi dan Dekripsi"))

    def openDialog(self, lineEdit, isImage, dialogName = ""):
        options = QtWidgets.QFileDialog.Options()

        fileOptions = 'Images (*.tiff *.jpeg *.jpg *.bmp)' if isImage else 'Numpy Array (*.npy)'

        fileName, _ = QtWidgets.QFileDialog.getOpenFileName(EkstraksiDekripsi, dialogName, '',
                                                  fileOptions, options=options)
        if fileName:
            lineEdit.setText(fileName)
            print(lineEdit.text())

    def extractAndDecrypt(self):
        resultFile = processExtractAndDecrypt(self.citraSteganoPath.text(), self.dcMatrixPath.text(), self.doubleSpinBoxX0.value(), self.doubleSpinBoxY0.value())
        pix = QtGui.QPixmap(resultFile)
        item = QtWidgets.QGraphicsPixmapItem(pix)
        scene = QtWidgets.QGraphicsScene(EkstraksiDekripsi)
        scene.addItem(item)
        self.graphicsView.setScene(scene)


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    EkstraksiDekripsi = QtWidgets.QWidget()
    ui = Ui_EkstraksiDekripsi()
    ui.setupUi(EkstraksiDekripsi)
    EkstraksiDekripsi.show()
    sys.exit(app.exec_())
