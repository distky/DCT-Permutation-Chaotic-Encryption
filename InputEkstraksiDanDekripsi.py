# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'InputEkstraksiDanDekripsi.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from function.DctEncrypt import processExtractAndDecrypt

class Ui_InputEkstraksiDanDekripsi(object):
    def setupUi(self, InputEkstraksiDanDekripsi):
        InputEkstraksiDanDekripsi.setObjectName("InputEkstraksiDanDekripsi")
        InputEkstraksiDanDekripsi.resize(777, 673)
        self.centralwidget = QtWidgets.QWidget(InputEkstraksiDanDekripsi)
        self.centralwidget.setObjectName("centralwidget")
        self.lblCitraStegano = QtWidgets.QLabel(self.centralwidget)
        self.lblCitraStegano.setGeometry(QtCore.QRect(10, 20, 171, 41))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.lblCitraStegano.setFont(font)
        self.lblCitraStegano.setObjectName("lblCitraStegano")
        self.lblDcmatrix = QtWidgets.QLabel(self.centralwidget)
        self.lblDcmatrix.setGeometry(QtCore.QRect(10, 80, 161, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.lblDcmatrix.setFont(font)
        self.lblDcmatrix.setObjectName("lblDcmatrix")
        self.citraSteganoPath = QtWidgets.QLineEdit(self.centralwidget)
        self.citraSteganoPath.setGeometry(QtCore.QRect(170, 30, 451, 31))
        self.citraSteganoPath.setEnabled(False)
        self.citraSteganoPath.setObjectName("citraSteganoPath")
        self.dcMatrixPath = QtWidgets.QLineEdit(self.centralwidget)
        self.dcMatrixPath.setGeometry(QtCore.QRect(170, 80, 451, 31))
        self.dcMatrixPath.setEnabled(False)
        self.dcMatrixPath.setObjectName("dcMatrixPath")
        self.btnCitraStegano = QtWidgets.QPushButton(self.centralwidget)
        self.btnCitraStegano.setGeometry(QtCore.QRect(640, 30, 101, 31))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.btnCitraStegano.setFont(font)
        self.btnCitraStegano.setObjectName("btnCitraStegano")
        self.btnCitraStegano.clicked.connect(lambda: self.openDialog(self.citraSteganoPath, True, dialogName='Citra Stegano'))
        self.btnDcMatrix = QtWidgets.QPushButton(self.centralwidget)
        self.btnDcMatrix.setGeometry(QtCore.QRect(640, 80, 101, 31))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.btnDcMatrix.setFont(font)
        self.btnDcMatrix.setObjectName("btnDcMatrix")
        self.btnDcMatrix.clicked.connect(lambda: self.openDialog(self.dcMatrixPath, False, dialogName='DC Matrix'))
        self.lblInputKunciX0Y0 = QtWidgets.QLabel(self.centralwidget)
        self.lblInputKunciX0Y0.setGeometry(QtCore.QRect(20, 125, 251, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.lblInputKunciX0Y0.setFont(font)
        self.lblInputKunciX0Y0.setObjectName("lblInputKunciX0Y0")
        self.lblNilaiX0 = QtWidgets.QLabel(self.centralwidget)
        self.lblNilaiX0.setGeometry(QtCore.QRect(20, 160, 91, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.lblNilaiX0.setFont(font)
        self.lblNilaiX0.setObjectName("lblNilaiX0")
        self.lblNilaiY0 = QtWidgets.QLabel(self.centralwidget)
        self.lblNilaiY0.setGeometry(QtCore.QRect(20, 200, 91, 21))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.lblNilaiY0.setFont(font)
        self.lblNilaiY0.setObjectName("lblNilaiY0")
        self.doubleSpinBoxX0 = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.doubleSpinBoxX0.setGeometry(QtCore.QRect(120, 160, 181, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.doubleSpinBoxX0.setFont(font)
        self.doubleSpinBoxX0.setDecimals(8)
        self.doubleSpinBoxX0.setMaximum(1.0)
        self.doubleSpinBoxX0.setSingleStep(1e-06)
        self.doubleSpinBoxX0.setObjectName("doubleSpinBoxX0")
        self.doubleSpinBoxY0 = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.doubleSpinBoxY0.setGeometry(QtCore.QRect(120, 200, 181, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.doubleSpinBoxY0.setFont(font)
        self.doubleSpinBoxY0.setDecimals(8)
        self.doubleSpinBoxY0.setMaximum(1.0)
        self.doubleSpinBoxY0.setSingleStep(1e-06)
        self.doubleSpinBoxY0.setObjectName("doubleSpinBoxY0")
        self.graphicsView = QtWidgets.QGraphicsView(self.centralwidget)
        self.graphicsView.setGeometry(QtCore.QRect(0, 290, 771, 311))
        self.graphicsView.setObjectName("graphicsView")
        self.btnEkstraksiDanDekripsi = QtWidgets.QPushButton(self.centralwidget)
        self.btnEkstraksiDanDekripsi.setGeometry(QtCore.QRect(260, 250, 221, 31))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.btnEkstraksiDanDekripsi.setFont(font)
        self.btnEkstraksiDanDekripsi.setObjectName("btnEkstraksiDanDekripsi")
        self.btnEkstraksiDanDekripsi.clicked.connect(self.extractAndDecrypt)
        self.btnKembali = QtWidgets.QPushButton(self.centralwidget)
        self.btnKembali.setGeometry(QtCore.QRect(650, 610, 91, 31))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.btnKembali.setFont(font)
        self.btnKembali.setObjectName("btnKembali")

        self.retranslateUi(InputEkstraksiDanDekripsi)
        self.currentWindow = InputEkstraksiDanDekripsi
        QtCore.QMetaObject.connectSlotsByName(InputEkstraksiDanDekripsi)

    def retranslateUi(self, InputEkstraksiDanDekripsi):
        _translate = QtCore.QCoreApplication.translate
        InputEkstraksiDanDekripsi.setWindowTitle(_translate("InputEkstraksiDanDekripsi", "Input Ekstraksi dan Dekripsi"))
        self.lblCitraStegano.setText(_translate("InputEkstraksiDanDekripsi", "Citra Stegano :"))
        self.lblDcmatrix.setText(_translate("InputEkstraksiDanDekripsi", "DC Matrix      :"))
        self.btnCitraStegano.setText(_translate("InputEkstraksiDanDekripsi", "Open File"))
        self.btnDcMatrix.setText(_translate("InputEkstraksiDanDekripsi", "Open File"))
        self.lblInputKunciX0Y0.setText(_translate("InputEkstraksiDanDekripsi", "Input Kunci X0 dan Y0"))
        self.lblNilaiX0.setText(_translate("InputEkstraksiDanDekripsi", "Nilai X0 :"))
        self.lblNilaiY0.setText(_translate("InputEkstraksiDanDekripsi", "Nilai Y0 :"))
        self.btnEkstraksiDanDekripsi.setText(_translate("InputEkstraksiDanDekripsi", "Ekstraksi dan Enkripsi"))
        self.btnKembali.setText(_translate("InputEkstraksiDanDekripsi", "Kembali"))

    def openDialog(self, lineEdit, isImage, dialogName = ""):
        options = QtWidgets.QFileDialog.Options()

        fileOptions = 'Images (*.tiff *.jpeg *.jpg *.bmp)' if isImage else 'Numpy Array (*.npy)'

        fileName, _ = QtWidgets.QFileDialog.getOpenFileName(self.currentWindow, dialogName, '',
                                                  fileOptions, options=options)
        if fileName:
            lineEdit.setText(fileName)
            print(lineEdit.text())

    def extractAndDecrypt(self):
        resultPixmap = processExtractAndDecrypt(self.citraSteganoPath.text(), self.dcMatrixPath.text(), self.doubleSpinBoxX0.value(), self.doubleSpinBoxY0.value())
        item = QtWidgets.QGraphicsPixmapItem(resultPixmap)
        scene = QtWidgets.QGraphicsScene(self.currentWindow)
        scene.addItem(item)
        self.graphicsView.setScene(scene)
        self.graphicsView.fitInView(scene.sceneRect(),QtCore.Qt.AspectRatioMode.KeepAspectRatio)


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    InputEkstraksiDanDekripsi = QtWidgets.QWidget()
    ui = Ui_InputEkstraksiDanDekripsi()
    ui.setupUi(InputEkstraksiDanDekripsi)
    InputEkstraksiDanDekripsi.show()
    sys.exit(app.exec_())