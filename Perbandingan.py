# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'Perbandingan.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from function.CommonFunction import MSE, PSNR

class Ui_Perbandingan(object):
    def setupUi(self, Perbandingan):
        Perbandingan.setObjectName("Perbandingan")
        Perbandingan.resize(777, 673)
        self.centralwidget = QtWidgets.QWidget(Perbandingan)
        self.centralwidget.setObjectName("centralwidget")
        self.lblCitra1 = QtWidgets.QLabel(self.centralwidget)
        self.lblCitra1.setGeometry(QtCore.QRect(10, 20, 171, 41))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.lblCitra1.setFont(font)
        self.lblCitra1.setObjectName("lblCitra1")
        self.lblCitra2 = QtWidgets.QLabel(self.centralwidget)
        self.lblCitra2.setGeometry(QtCore.QRect(10, 80, 161, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.lblCitra2.setFont(font)
        self.lblCitra2.setObjectName("lblDcmatrix")
        self.citra1Path = QtWidgets.QLineEdit(self.centralwidget)
        self.citra1Path.setGeometry(QtCore.QRect(100, 30, 521, 31))
        self.citra1Path.setObjectName("citra1Path")
        self.citra1Path.setEnabled(False)
        self.citra2Path = QtWidgets.QLineEdit(self.centralwidget)
        self.citra2Path.setGeometry(QtCore.QRect(100, 80, 521, 31))
        self.citra2Path.setObjectName("citra2Path")
        self.citra2Path.setEnabled(False)
        self.btnCitra1 = QtWidgets.QPushButton(self.centralwidget)
        self.btnCitra1.setGeometry(QtCore.QRect(640, 30, 101, 31))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.btnCitra1.setFont(font)
        self.btnCitra1.setObjectName("btnCitra1")
        self.btnCitra1.clicked.connect(lambda: self.openDialog(self.citra1Path, self.graphicsViewCitra1, True, dialogName='Citra 1'))
        self.btnCitra2 = QtWidgets.QPushButton(self.centralwidget)
        self.btnCitra2.setGeometry(QtCore.QRect(640, 80, 101, 31))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.btnCitra2.setFont(font)
        self.btnCitra2.setObjectName("btnCitra2")
        self.btnCitra2.clicked.connect(lambda: self.openDialog(self.citra2Path, self.graphicsViewCitra2, True, dialogName='Citra 2'))
        self.graphicsViewCitra1 = QtWidgets.QGraphicsView(self.centralwidget)
        self.graphicsViewCitra1.setGeometry(QtCore.QRect(0, 290, 371, 311))
        self.graphicsViewCitra1.setObjectName("graphicsViewCitra1")
        self.btnKembali = QtWidgets.QPushButton(self.centralwidget)
        self.btnKembali.setGeometry(QtCore.QRect(650, 610, 91, 31))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.btnKembali.setFont(font)
        self.btnKembali.setObjectName("btnKembali")
        self.graphicsViewCitra2 = QtWidgets.QGraphicsView(self.centralwidget)
        self.graphicsViewCitra2.setGeometry(QtCore.QRect(400, 290, 371, 311))
        self.graphicsViewCitra2.setObjectName("graphicsViewCitra2")
        self.txtMSE = QtWidgets.QLineEdit(self.centralwidget)
        self.txtMSE.setGeometry(QtCore.QRect(220, 150, 141, 31))
        self.txtMSE.setObjectName("txtMSE")
        self.txtMSE.setEnabled(False)
        self.txtPSNR = QtWidgets.QLineEdit(self.centralwidget)
        self.txtPSNR.setGeometry(QtCore.QRect(220, 190, 141, 31))
        self.txtPSNR.setObjectName("txtPSNR")
        self.txtPSNR.setEnabled(False)
        self.lblMSE = QtWidgets.QLabel(self.centralwidget)
        self.lblMSE.setGeometry(QtCore.QRect(150, 150, 51, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.lblMSE.setFont(font)
        self.lblMSE.setObjectName("lblMSE")
        self.lblPSNR = QtWidgets.QLabel(self.centralwidget)
        self.lblPSNR.setGeometry(QtCore.QRect(150, 190, 71, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.lblPSNR.setFont(font)
        self.lblPSNR.setObjectName("lblPSNR")
        self.btnHitungMSE = QtWidgets.QPushButton(self.centralwidget)
        self.btnHitungMSE.setGeometry(QtCore.QRect(20, 150, 111, 31))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.btnHitungMSE.setFont(font)
        self.btnHitungMSE.setObjectName("btnHitungMSE")
        self.btnHitungMSE.clicked.connect(self.hitungMSE)
        self.btnHitungPSNR = QtWidgets.QPushButton(self.centralwidget)
        self.btnHitungPSNR.setGeometry(QtCore.QRect(20, 190, 111, 31))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.btnHitungPSNR.setFont(font)
        self.btnHitungPSNR.setObjectName("btnHitungPSNR")
        self.btnHitungPSNR.clicked.connect(self.hitungPSNR)
        

        self.btnCitra2.raise_()
        self.btnCitra1.raise_()
        self.lblCitra1.raise_()
        self.citra1Path.raise_()
        self.graphicsViewCitra1.raise_()
        self.btnKembali.raise_()
        self.lblCitra2.raise_()
        self.citra2Path.raise_()
        self.graphicsViewCitra2.raise_()
        self.txtMSE.raise_()
        self.txtPSNR.raise_()
        self.btnHitungMSE.raise_()
        self.btnHitungPSNR.raise_()
        self.lblPSNR.raise_()
        self.lblMSE.raise_()
        self.retranslateUi(Perbandingan)
        QtCore.QMetaObject.connectSlotsByName(Perbandingan)

    def retranslateUi(self, Perbandingan):
        _translate = QtCore.QCoreApplication.translate
        Perbandingan.setWindowTitle(_translate("Perbandingan", "Perbandingan"))
        self.lblCitra1.setText(_translate("Perbandingan", "Citra 1 :"))
        self.lblCitra2.setText(_translate("Perbandingan", "Citra 2 :"))
        self.btnCitra1.setText(_translate("Perbandingan", "Open File"))
        self.btnCitra2.setText(_translate("Perbandingan", "Open File"))
        self.btnKembali.setText(_translate("Perbandingan", "Kembali"))
        self.lblMSE.setText(_translate("Perbandingan", "MSE"))
        self.lblPSNR.setText(_translate("Perbandingan", "PSNR"))
        self.btnHitungMSE.setText(_translate("Perbandingan", "Hitung MSE"))
        self.btnHitungPSNR.setText(_translate("Perbandingan", "Hitung PSNR"))

    def openDialog(self, lineEdit, graphicView, isImage, dialogName = ""):
        Perbandingan = QtWidgets.QDialog()
        options = QtWidgets.QFileDialog.Options()

        fileOptions = 'Images (*.tiff *.jpeg *.jpg *.bmp)' if isImage else 'Numpy Array (*.npy)'

        fileName, _ = QtWidgets.QFileDialog.getOpenFileName(Perbandingan, dialogName, '',
                                                  fileOptions, options=options)
        if fileName:
            lineEdit.setText(fileName)
            pix = QtGui.QPixmap(fileName)
            item = QtWidgets.QGraphicsPixmapItem(pix)
            scene = QtWidgets.QGraphicsScene(Perbandingan)
            scene.addItem(item)
            self.graphicsViewCitra1.setScene(scene)
            self.graphicsViewCitra2.setScene(scene)
            self.graphicsViewCitra1.fitInView(scene.sceneRect(),QtCore.Qt.AspectRatioMode.KeepAspectRatio)
            self.graphicsViewCitra2.fitInView(scene.sceneRect(),QtCore.Qt.AspectRatioMode.KeepAspectRatio)

    def hitungMSE(self):
        self.txtMSE.setText(str(MSE(self.citra1Path.text(), self.citra2Path.text())))
    
    def hitungPSNR(self):
        self.txtPSNR.setText(str(PSNR(self.citra1Path.text(), self.citra2Path.text())))



if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    Perbandingan = QtWidgets.QDialog()
    ui = Ui_Perbandingan()
    ui.setupUi(Perbandingan)
    Perbandingan.show()
    sys.exit(app.exec_())
