# -*- coding: utf-8 -*-

# Perbandingan implementation generated from reading ui file 'Perbandingan.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from function.CommonFunction import MSE, PSNR


class Ui_Perbandingan(object):
    def setupUi(self, Perbandingan):
        Perbandingan.setObjectName("Perbandingan")
        Perbandingan.resize(639, 480)
        self.btnCitra1 = QtWidgets.QPushButton(Perbandingan)
        self.btnCitra1.setGeometry(QtCore.QRect(400, 10, 75, 20))
        self.btnCitra1.setObjectName("btnCitra1")
        self.btnCitra1.clicked.connect(lambda: self.openDialog(self.citra1Path, self.graphicsView1, True, dialogName='Citra 1'))
        self.btnCitra2 = QtWidgets.QPushButton(Perbandingan)
        self.btnCitra2.setGeometry(QtCore.QRect(400, 60, 75, 20))
        self.btnCitra2.setObjectName("btnCitra2")
        self.btnCitra2.clicked.connect(lambda: self.openDialog(self.citra2Path, self.graphicsView2, True, dialogName='Citra 2'))
        self.lblCitra1 = QtWidgets.QLabel(Perbandingan)
        self.lblCitra1.setGeometry(QtCore.QRect(20, 10, 71, 20))
        self.lblCitra1.setObjectName("lblCitra1")
        self.citra1Path = QtWidgets.QLineEdit(Perbandingan)
        self.citra1Path.setEnabled(False)
        self.citra1Path.setGeometry(QtCore.QRect(100, 10, 271, 20))
        self.citra1Path.setObjectName("citra1Path")
        self.graphicsView1 = QtWidgets.QGraphicsView(Perbandingan)
        self.graphicsView1.setGeometry(QtCore.QRect(20, 200, 256, 192))
        self.graphicsView1.setObjectName("graphicsView1")
        self.btnKembali = QtWidgets.QPushButton(Perbandingan)
        self.btnKembali.setGeometry(QtCore.QRect(530, 430, 75, 21))
        self.btnKembali.setObjectName("btnKembali")
        self.lblCitra2 = QtWidgets.QLabel(Perbandingan)
        self.lblCitra2.setGeometry(QtCore.QRect(20, 60, 71, 20))
        self.lblCitra2.setObjectName("lblCitra2")
        self.citra2Path = QtWidgets.QLineEdit(Perbandingan)
        self.citra2Path.setEnabled(False)
        self.citra2Path.setGeometry(QtCore.QRect(100, 60, 271, 20))
        self.citra2Path.setObjectName("citra2Path")
        self.graphicsView2 = QtWidgets.QGraphicsView(Perbandingan)
        self.graphicsView2.setGeometry(QtCore.QRect(350, 200, 256, 192))
        self.graphicsView2.setObjectName("graphicsView2")
        self.txtMSE = QtWidgets.QLineEdit(Perbandingan)
        self.txtMSE.setEnabled(False)
        self.txtMSE.setGeometry(QtCore.QRect(200, 110, 271, 20))
        self.txtMSE.setObjectName("txtMSE")
        self.txtPSNR = QtWidgets.QLineEdit(Perbandingan)
        self.txtPSNR.setEnabled(False)
        self.txtPSNR.setGeometry(QtCore.QRect(200, 150, 271, 20))
        self.txtPSNR.setObjectName("txtPSNR")
        self.btnHitungMSE = QtWidgets.QPushButton(Perbandingan)
        self.btnHitungMSE.setGeometry(QtCore.QRect(20, 110, 75, 21))
        self.btnHitungMSE.setObjectName("btnHitungMSE")
        self.btnHitungMSE.clicked.connect(self.hitungMSE)
        self.btnHitungPSNR = QtWidgets.QPushButton(Perbandingan)
        self.btnHitungPSNR.setGeometry(QtCore.QRect(20, 150, 75, 21))
        self.btnHitungPSNR.setObjectName("btnHitungPSNR")
        self.btnHitungPSNR.clicked.connect(self.hitungPSNR)
        self.lblMSE = QtWidgets.QLabel(Perbandingan)
        self.lblMSE.setGeometry(QtCore.QRect(120, 110, 71, 20))
        self.lblMSE.setObjectName("lblMSE")
        self.lblPSNR = QtWidgets.QLabel(Perbandingan)
        self.lblPSNR.setGeometry(QtCore.QRect(120, 150, 71, 20))
        self.lblPSNR.setObjectName("lblPSNR")
        self.btnCitra2.raise_()
        self.btnCitra1.raise_()
        self.lblCitra1.raise_()
        self.citra1Path.raise_()
        self.graphicsView1.raise_()
        self.btnKembali.raise_()
        self.lblCitra2.raise_()
        self.citra2Path.raise_()
        self.graphicsView2.raise_()
        self.txtMSE.raise_()
        self.txtPSNR.raise_()
        self.btnHitungMSE.raise_()
        self.btnHitungPSNR.raise_()
        self.lblPSNR.raise_()
        self.lblMSE.raise_()

        self.retranslateUi(Perbandingan)
        QtCore.QMetaObject.connectSlotsByName(Perbandingan)

    def retranslateUi(self, Perbandingan):
        _translate = QtCore.QCoreApplication.translate
        Perbandingan.setWindowTitle(_translate("Perbandingan", "Perbandingan"))
        self.btnCitra2.setText(_translate("Perbandingan", "Open File"))
        self.btnCitra1.setText(_translate("Perbandingan", "Open File"))
        self.lblCitra1.setText(_translate("Perbandingan", "Citra 1"))
        self.btnKembali.setText(_translate("Perbandingan", "Kembali"))
        self.lblCitra2.setText(_translate("Perbandingan", "Citra 2"))
        self.btnHitungMSE.setText(_translate("Perbandingan", "Hitung MSE"))
        self.btnHitungPSNR.setText(_translate("Perbandingan", "Hitung PSNR"))
        self.lblMSE.setText(_translate("Perbandingan", "MSE"))
        self.lblPSNR.setText(_translate("Perbandingan", "PSNR"))

    def openDialog(self, lineEdit, graphicView, isImage, dialogName = ""):
        options = QtWidgets.QFileDialog.Options()

        fileOptions = 'Images (*.tiff *.jpeg *.jpg *.bmp)' if isImage else 'Numpy Array (*.npy)'

        fileName, _ = QtWidgets.QFileDialog.getOpenFileName(Perbandingan, dialogName, '',
                                                  fileOptions, options=options)
        if fileName:
            lineEdit.setText(fileName)
            pix = QtGui.QPixmap(fileName)
            item = QtWidgets.QGraphicsPixmapItem(pix)
            scene = QtWidgets.QGraphicsScene(Perbandingan)
            scene.addItem(item)
            graphicView.setScene(scene)

    def hitungMSE(self):
        self.txtMSE.setText(str(MSE(self.citra1Path.text(), self.citra2Path.text())))
    
    def hitungPSNR(self):
        self.txtPSNR.setText(str(PSNR(self.citra1Path.text(), self.citra2Path.text())))



if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    Perbandingan = QtWidgets.QWidget()
    ui = Ui_Perbandingan()
    ui.setupUi(Perbandingan)
    Perbandingan.show()
    sys.exit(app.exec_())
